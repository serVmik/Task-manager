{% load i18n %}
<nav class="container p-0">
  <ul class="nav">

    <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">{% trans 'Task manager' %}</a></li>
    <li class="nav-item"><a class="nav-link" href="{% url 'users:list' %}">{% trans 'Users' %}</a></li>

    {% if user.is_authenticated %}
      <li class="nav-item"><a class="nav-link" href="#">{{ user.username }} | {% trans 'Logout' %}</a></li>
    {% else %}
      <li class="nav-item"><a class="nav-link" href="#">{% trans 'Registration' %} | {% trans 'Login' %}</a></li>
    {% endif %}

    <!-- https://docs.djangoproject.com/en/4.1/topics/i18n/translation/#the-set-language-redirect-view -->
    <li class="nav-link">
      <form action="{% url 'set_language' %}" method="post">{% csrf_token %}
        <input name="next" type="hidden" value="{{ redirect_to }}">
        <select name="language">
            {% get_current_language as LANGUAGE_CODE %}
            {% get_available_languages as LANGUAGES %}
            {% get_language_info_list for LANGUAGES as languages %}
            {% for language in languages %}
                <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                    {{ language.name_local }} ({{ language.code }})
                </option>
            {% endfor %}
        </select>
        <input type="submit" value="Go">
      </form>
    </li>

  </ul>
</nav>